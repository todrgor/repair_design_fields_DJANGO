{% extends 'mainapp/base.html' %}

{% block title %}
  {{ title }}
{% endblock %}

{% block css %}
  <link rel="stylesheet" href="/static/lib\css\style_header.css">
  <link rel="stylesheet" href="/static/lib\css\style_footer.css">
  <link rel="stylesheet" href="/static/lib\css\style_watch_designs.css">
  <link rel="stylesheet" href="/static/lib\css\style_pub_create_new.css">
  <link rel="stylesheet" href="/static/lib\css\style_filter.css">
{% endblock %}

{% block content %}
  <div class="ne_nuzhno_no_starum_skriptam_nuzhno" style="display:none;"> <!-- –≤ header –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ö–æ–≤–µ—Ä, –∏ –±–µ–∑ —ç—Ç–æ–≥–æ –±–ª–æ–∫–∞ –≤–µ—Å—å js –ª–æ–º–∞–µ—Ç—Å—è -->
    <div id="tags_count"></div>
    <div id="fltr_cost_min"></div>
    <div id="fltr_cost_max"></div>
    <div id="fltr_cost_p"></div>
    <div id="fltr_style_p"></div>
    <div id="fltr_room_p"></div>
    <div id="checked_styles_count"></div>
    <div id="checked_rooms_count"></div>
    <div class="opened_filter"></div>
  </div>

  {% if user.role.id != 2 and user.role.id != 4 %}
    <div class="page_title" style="min-height: 600px;">
        <p class="title_p">–í–∞–º —Å—é–¥–∞ –Ω–µ–ª—å–∑—è.</p>
        <p>–ù–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–∏ <a href="">–∞–≤—Ç–æ—Ä–∞</a> –∏–ª–∏ <a href="">—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</a>.</p>
    </div>
  {% else %}
    <div class="page_title" style="margin: 30px auto; height: fit-content;">
        <p class="title_p" style="width: 70%;">{{ title }}</p>
    </div>

    <div class="pubs_container">
      <form class="" action="" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <div class="pub_types" {% if not action == 'create' and not user.role.id == 4 %}style="display: none;"{% endif %}>
          <h4>–í–∏–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:</h4>
          {{ form.type }}
          {{ form.type.errors }}
        </div>

        {% if user.role.id == 4 %}
          <div class="pub_author pub_inp_one">
            <h4>–ê–≤—Ç–æ—Ä –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:</h4>
            {{ form.author }}
            {{ form.author.errors }}
          </div>
        {% endif %}

        <div class="pub_title pub_inp_one">
          <h4>–ó–∞–≥–æ–ª–æ–≤–æ–∫:</h4>
          {{ form.title }}
          {{ form.title.errors }}
          <p>–ó–∞–≥–æ–ª–æ–≤–∫ –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ ‚Äî 135 —Å–∏–º–≤–æ–ª–æ–≤.</p>
        </div>

        <div class="pub_preview pub_inp_one">
          <h4>{% if pub_type == 31  %}
              –§–∞–π–ª:
            {% else %}
              –ü—Ä–µ–≤—å—é:
            {% endif %}</h4>

          {% if pub_preview  %}
            <div class="preview">
              <div class="preview_now">
                <p>–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç:</p>
                {% if '.mp4' in pub_preview.url or '.mov' in pub_preview.url %}
                  <video class="paused" muted="muted" controls="controls" loop>
                    <source src="{{ pub_preview.url }}" type='video/mp4;'>
                    –¢–µ–≥ video –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–∞—à–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º. –£–≤—ã.
                  </video>
                {% else %}
                  <img src="{{ pub_preview.url }}" alt="">
                {% endif %}
              </div>

              <div class="preview_update">
          {% endif %}

                {{ form.preview }}
                {{ form.preview.errors }}
                <p>–ò–¥–µ–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø—Ä–µ–≤—å—é ‚Äî 3.3:1 (—à–∏—Ä–∏–Ω–∞:–≤—ã—Å–æ—Ç–∞).<br>–° –¥—Ä—É–≥–∏–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ —Ñ–æ—Ç–æ –º–æ–∂–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è.</p>

          {% if pub_preview  %}
                </div>
            </div>
          {% endif %}
        </div>

        {% if pub_type != 31 and user.role.id != 4 or user.role.id == 4 %}
          <div class="pub_content pub_inp_one {% if pub_type != 31 %}show{% endif %}">
            <h4>–ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ:</h4>
            <p style="width: max-content;">–ñ–≥–∏—Ç–µ! –°–¥–µ–ª–∞–π—Ç–µ —á–∏—Ç–∞—Ç–µ–ª—é –∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏—Ñ–Ω—É—é –ø–æ–ª–µ–∑–Ω—É—é –Ω–µ–≤–æ–¥—è–Ω—É—é —Å—Ç–∞—Ç—å—é üìù</p>
            {{ form.media }}
            {{ form.content }}
            {{ form.content.errors }}
          </div>
        {% endif %}

        <div class="pub_tags">
          <h4>–¢—ç–≥–∏ –∫ –ø—É–±–ª–∏–∫—Ü–∏–∏:</h4>
          <div id="budget" class="filter_mini_div show cost">
            <p class="opened_filter_text full_width">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã, ‚ÇΩ</p>
            {{ form.cost_min }}
            <p style="font-size: 15px; font-weight: 900;">-</p>
            {{ form.cost_max }}
            {{ form.cost_min.errors }}
            {{ form.cost_max.errors }}
          </div>

          {% for category in tag_categories.repair %}
            <div class="filter_mini_div {% if pub_type == 11 or not pub_type %}show{% endif %} repair">
              <p class="opened_filter_text full_width big_p">
                <span class="big_p_parth">
                  {{ category.name }}:
                </span>
              </p>

              {% if category.id in empty_tag_categories_ids %}
                <p class="opened_filter_text full_width big_p">
                  <span class="big_p_parth" style="color: red;">
                    –ù–µ –≤—ã–±—Ä–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ç–µ–≥–∞ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏! –ù–µ–ª—å–∑—è —Ç–∞–∫!
                  </span>
                </p>
              {% endif %}

              <div class="labels" id="{{ category.id }}">
                <!-- –¥–∏–≤ —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏ -->
                {% for tag in tags %}
                  {% if tag.category == category and tag.name != '–î—Ä—É–≥–æ–µ' %}
                    <label>
                      <input type="checkbox" name="{{ tag.id }}" value="{{ tag.name }}" class="one_tag"  style="margin-right: 0;" {% if tag in selected_tags %} checked {% endif %}>
                      {{ tag.name }}
                    </label>
                  {% endif %}
                {% endfor %}

                {% for tag in tags %}
                  {% if tag.category == category and tag.name == '–î—Ä—É–≥–æ–µ' %}
                    <label>
                      <input type="checkbox" name="{{ tag.id }}" value="{{ tag.name }}" class="one_tag"  style="margin-right: 0;" {% if tag in selected_tags %} checked {% endif %}>
                      {{ tag.name }}
                    </label>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          {% endfor %}

          {% for category in tag_categories.design %}
            <div class="filter_mini_div {% if pub_type == 21  %}show{% endif %} design">
              <p class="opened_filter_text full_width big_p">
                <span class="big_p_parth">
                  {{ category.name }}:
                </span>
              </p>

              {% if category.id in empty_tag_categories_ids %}
                <p class="opened_filter_text full_width big_p">
                  <span class="big_p_parth" style="color: red;">
                    –ù–µ –≤—ã–±—Ä–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ç–µ–≥–∞ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏! –ù–µ–ª—å–∑—è —Ç–∞–∫!
                  </span>
                </p>
              {% endif %}
              <div class="labels" id="{{ category.id }}">
                <!-- –¥–∏–≤ —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏ -->
                {% for tag in tags %}
                  {% if tag.category == category and tag.name != '–î—Ä—É–≥–æ–µ' %}
                    <label>
                      <input type="checkbox" name="{{ tag.id }}" value="{{ tag.name }}" class="one_tag"  style="margin-right: 0;" {% if tag in selected_tags %} checked {% endif %}>
                      {{ tag.name }}
                    </label>
                  {% endif %}
                {% endfor %}

                {% for tag in tags %}
                  {% if tag.category == category and tag.name == '–î—Ä—É–≥–æ–µ' %}
                    <label>
                      <input type="checkbox" name="{{ tag.id }}" value="{{ tag.name }}" class="one_tag"  style="margin-right: 0;" {% if tag in selected_tags %} checked {% endif %}>
                      {{ tag.name }}
                    </label>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          {% endfor %}

          {% for category in tag_categories.lifehack %}
            <div class="filter_mini_div {% if pub_type == 31  %}show{% endif %} lifehack">
              <p class="opened_filter_text full_width big_p">
                <span class="big_p_parth">
                  {{ category.name }}:
                </span>
              </p>

              {% if category.id in empty_tag_categories_ids %}
                <p class="opened_filter_text full_width big_p">
                  <span class="big_p_parth" style="color: red;">
                    –ù–µ –≤—ã–±—Ä–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ç–µ–≥–∞ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏! –ù–µ–ª—å–∑—è —Ç–∞–∫!
                  </span>
                </p>
              {% endif %}

              <div class="labels" id="{{ category.id }}">
                <!-- –¥–∏–≤ —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏ –ª–∞–π—Ñ—Ö–∞–∫ -->
                {% for tag in tags %}
                  {% if tag.category == category and tag.name != '–î—Ä—É–≥–æ–µ' %}
                    <label>
                      <input type="checkbox" name="{{ tag.id }}" value="{{ tag.name }}" class="one_tag"  style="margin-right: 0;" {% if tag in selected_tags %} checked {% endif %}>
                      {{ tag.name }}
                    </label>
                  {% endif %}
                {% endfor %}

                {% for tag in tags %}
                  {% if tag.category == category and tag.name == '–î—Ä—É–≥–æ–µ' %}
                    <label>
                      <input type="checkbox" name="{{ tag.id }}" value="{{ tag.name }}" class="one_tag"  style="margin-right: 0;" {% if tag in selected_tags %} checked {% endif %}>
                      {{ tag.name }}
                    </label>
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          {% endfor %}
        </div>

        <input type="submit" {% if action == 'create' %} name="create!" value="–°–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏–∫—Ü–∏—é" {% else %}name="edit!" value="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è" {% endif %}>
      </form>

      <div class="if_here_is_not_something_what_you_want" style="margin: -100px 0 50px 0px; font-size: 13px; display: flex; justify-content: flex-end; width: fit-content; position: relative; left: 70%;">
        <p style="color: gray;">–ï—Å–ª–∏ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —á–µ–≥–æ-–ª–∏–±–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç,<br>–Ω–∞–ø—Ä–∏–º–µ—Ä –∫–∞–∫–∏—Ö-–ª–∏–±–æ —Ç–µ–≥–æ–≤ –∏–ª–∏ –ø–æ–ª–µ–π,<br>—Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –Ω–∞–º —á–µ—Ä–µ–∑ <a href="{% url 'send_to_support' %}" style="opacity: 1; text-decoration: underline;">–æ–±—Ä–∞—â–µ–Ω–∏–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É ‚Ä∫</a></p>
      </div>
    </div>
  {% endif %}


{% endblock %}

{% block scripts_individual %}
  <script src="/static/lib/js/animation-pub-create-new.js"></script>
{% endblock %}
